# Build image first: nix-build docker.nix && docker load < result
services:
  zamlet:
    image: zamlet:latest
    container_name: zamlet
    working_dir: /workspace
    volumes:
      - .:/workspace
      - /var/run/docker.sock:/var/run/docker.sock
      - bazel-cache:/root/.cache/bazel
      - bazelisk-cache:/root/.cache/bazelisk
    environment:
      - USER=root
    tty: true
    stdin_open: true

volumes:
  bazel-cache:
  bazelisk-cache:
