Network Node
------------

inputs:
  ni_valid[n_channels]
  ni_data[n_channels]
  si_valid[n_channels]
  ...

  no_ready[n_channels]
  so_ready[n_channels]
  ...

  hi_valid
  hi_data
  hi_last

  ho_ready

  forward_valid
  forward_direction (4 bits)
  forward_header (32 bits)

outputs:
  ni_ready[n_channels]
  si_ready[n_channels]
  ...

  no_valid[n_channels]
  no_data[n_channels]
  so_valid[n_channels]
  ...

  ho_valid
  ho_data
  
  hi_ready

  forward_ready


instances:
  n_channels x PacketSwitch:
  
  state:
    connection_in_active
    connection_in_channel
    
    connection_out_active
    connection_out_channel

  When hi_last moves through the connection_in becomes in active.
  We look through the PacketSwitch.hi_ready to see who is ready
  for another packet.  Connection immediately after finished one
  gets preference, and priority decreases as we check the next ones.

  Simimilarly when ho_last moves though we end the connection_out


  




