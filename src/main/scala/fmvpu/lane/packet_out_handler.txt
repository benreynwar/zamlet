PacketOutHandler:

  inputs:
    o_ready

    handler_request[3:0]
    handler_confirm[3:0]

    connections_valid[3:0]
    connections_last[3:0]  (last word in a packet)
    connections_append[3:0] (start appending words from this node)
    connections_data[31:0][3:0]

  outputs:
    o_valid  (connected to no_valid, so_valid, eo_valid, wo_valid, or ho_valid)
    o_last (only used by 'here')
    o_data 

    handler_response[3:0]

    connections_ready[3:0]

  state:
    connected: bool
    connected_in: index of PacketInHandler we're connected to.
    priority: Which PacketInHandler has priority (if establishing new connection)
      rotates every cycle

  If connected:
    handler_response always low
    o_* is connected to connections_*[connected_in]
    if we sent the last word in a packet then 'connected' becomes false.
    if 'append' was seen then switch 'connected_in' to this node ('here').

  if not connected:
    handler_response is high to PacketInHandler that sent handler_request that had the highest priority.
    If they reply with outconfirm_valid then we create a new connection to them.

  The 'priority' connection has highest priority.
  ('priority' + 1) % 4 has the next highest and so on.
